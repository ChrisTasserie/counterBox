/****************************************************************
*****************************************************************
****  Class of Javascript Document for jQuery              ****
*****************************************************************
****    Powered by Christophe Tasserie                       ****
****    Designed by Christophe Tasserie                      ****
****                                                         ****
****    Copyright Â© 2011 - All rights reserved               ****
****                                                         ****
****    M. Tasserie Christophe                               ****
****                                                         ****
****    48 Chemin des autrichiens                            ****
****    06600 Antibes                                        ****
****    France                                               ****
****                                                         ****
****    +33 622 256 941                                      ****
****    christophe@tasserie.fr                               ****
****    http://tasserie.fr                                   ****
*****************************************************************
*****************************************************************
****	Repository is counterBox                             ****
*****************************************************************
****************************************************************/
(function(e){e.fn.extend({counterBox:function(t,r,s,o,u){function b(t){var n=a.maxValue.toString().length;var r=a.percentShadowRoll/100;var i=a.borderWidth;var s=a.innerWidth;var o=a.numberWidth;var u=i*2+(s*n-s)+o*n;var f=a.numberHeight;var l=i*2+f;var c=i+f;var h=a.xShadowBox;var d=a.yShadowBox;var v=a.blurShadowBox;var m=a.spreadShadowBox;var g=a.colorFrom;var y=a.colorTo;var b=a.colorShadowBox;var w=a.colorShadowRollFrom;var E=a.colorShadowRollTo;var S=a.background;p=document.createElement("div");$divFront=document.createElement("div");$canvas=document.createElement("canvas");e($canvas).attr("width",u);e($canvas).attr("height",l);e($divFront).append($canvas);e($divFront).attr("class","box_timer");e(p).append($divFront);e(t).append(p);var x="";if(a.shadowBox==true){x="box-shadow:"+h+" "+d+" "+v+" "+m+" "+b+";"}e(t).attr("style","width:"+u+"px;height:"+l+"px;");e(p).attr("style","position:relative;width:"+u+"px;height:"+l+"px;background:"+S+";"+x+"z-index:9999");for(iRoll=0;iRoll<n;iRoll++){var T=$canvas.getContext("2d");var N=T.createLinearGradient(0,i,0,c);N.addColorStop(0,w);N.addColorStop(r,E);N.addColorStop(r,E);N.addColorStop(1,w);T.fillStyle=N;T.fillRect(i+(s*iRoll+o*iRoll),i,o,f)}var C=$canvas.getContext("2d");C.fillStyle=g;C.fillRect(0,0,u,i);var k=$canvas.getContext("2d");var L=k.createLinearGradient(0,i,0,c);L.addColorStop(0,g);L.addColorStop(.5,y);L.addColorStop(1,g);k.fillStyle=L;k.fillRect(u-i,i,i,f);var A=$canvas.getContext("2d");C.fillStyle=g;C.fillRect(0,i+f,u,i);var O=$canvas.getContext("2d");var M=O.createLinearGradient(0,i,0,c);M.addColorStop(0,g);M.addColorStop(.5,y);M.addColorStop(1,g);O.fillStyle=M;O.fillRect(0,i,i,f);if(s>0){for(iInner=1;iInner<n;iInner++){var _=$canvas.getContext("2d");var D=_.createLinearGradient(0,s,0,c);D.addColorStop(0,g);D.addColorStop(.5,y);D.addColorStop(1,g);_.fillStyle=D;_.fillRect(i+(o*iInner+s*iInner-s),i,s,f)}}}function w(t){var r=a.maxValue.toString().length;for(iRoll=0;iRoll<r;iRoll++){var s=0;var o=a.numberStart;var u=a.numberStop;var f=a.innerWidth;var l=a.numberWidth;var c=a.numberHeight/2;var h=a.numberHeight;var p=a.borderWidth;var d=a.colorText;for(n=o;n<=u;n++){s=n-o}var v=-(s*c)-c/2-p;var m=p+l*iRoll+f*iRoll;var g=parseInt(c*85/100);if(o<=u){$divMaskBoxNumber=document.createElement("div");e($divMaskBoxNumber).attr("id","maskBox"+iRoll);e($divMaskBoxNumber).attr("style","top:"+p+"px;left:"+m+"px;width:"+l+"px;height:"+h+"px;");e($divMaskBoxNumber).attr("class","box_timer-number-mask");$divBoxNumber=document.createElement("div");e($divBoxNumber).attr("id","columnBox"+iRoll);e($divBoxNumber).attr("style","width:"+l+"px;top:"+v+"px;");e($divBoxNumber).attr("value",0);e($divBoxNumber).attr("class","box_timer-number-column");for(iBox=0;iBox<3;iBox++){$divRowNumber=document.createElement("div");e($divRowNumber).attr("id","rowBox"+iBox);e($divRowNumber).attr("style","width:"+l+"px");e($divRowNumber).attr("class","box_timer-number-row");for(i=o;i<=u;i++){$divNumber=document.createElement("div");$spanNumber=document.createElement("span");e($divNumber).attr("id","Number"+i);e($divNumber).attr("style","width:"+l+"px;height:"+c+"px;");e($divNumber).attr("class","box_timer-number");e($spanNumber).attr("style","width:"+l+"px;height:"+c+"px;color:"+d+";font-size:"+g+"px;");e($spanNumber).attr("class","box_timer-number-inner");e($divNumber).append($spanNumber);e($divRowNumber).append($divNumber);e($spanNumber).html(i)}e($divBoxNumber).append($divRowNumber)}e($divMaskBoxNumber).append($divBoxNumber);e(t).append($divMaskBoxNumber)}}}function E(t){var n=parseInt(a.maxValue.toString().substr(0,1));$box=e(t).children()[1];$column=e(e($box).children()[1]).children()[0];for(i=0;i<3;i++){$row=e($column).children()[i];for(iMax=0;iMax<=a.numberStop;iMax++){if(iMax>n){e(e($row).children()[iMax]).hide()}else{e(e($row).children()[iMax]).show()}}}}function S(t){var n=new Array;var r=a.numberHeight/2;var s=a.numberStart;var o=a.maxValue.toString().length;if(f.toString().length>=1){n=f.toString().split("")}else{n=new Array(a.numberStart)}e(e(t).find("input")).val(f);if(n.length<=o){$box=e(t).children()[1];for(i=1;i<=a.maxValue.toString().length;i++){var u=a.numberStart;$column=e(e($box).children()[i]).children()[0];var l=e(e($column).children()[0]).height();var c=u*r-r/2+l;e($column).css({top:-c+"px"});e($column).attr("value",u)}var h=0;for(i=a.maxValue.toString().length-n.length;i<=n.length;i++){var o=i+1;var u=n[h];$column=e(e($box).children()[o]).children()[0];var l=e(e($column).children()[0]).height();var c=u*r-r/2+l;e($column).css({top:-c+"px"});e($column).attr("value",u);h++}}}var a;var f=r;var l=s;var c=o;var h=u;var p;var d;var v=function(e,t){if(isNaN(t)==false){f=parseInt(t)}else{f=0}if(f>a.maxValue){f=a.maxValue}S(e)};var m=function(e,t){a.maxValue=t;E(e);v(e,f)};var g=function(t,n,r){var s=n-e(e(t).find("input")).val();f=n;var o=r;if(!r){o=null}var u=new Array;var p=a.numberHeight/2;var d=a.numberStart;if(f>a.maxValue){if(a.repeat==true){f=0}else{f=a.maxValue}}e(e(t).find("input")).val(f);if(f.toString().length>=1){u=f.toString().split("")}else{u=new Array(a.numberStart)}if(u.length<=a.maxValue.toString().length){$box=e(t).children()[1];for(i=1;i<=a.maxValue.toString().length-u.length;i++){var v=a.numberStart;$column=e(e($box).children()[i]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))>v){e($column).animate({top:-(g-p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c);e($column).attr("value",v)}for(i=1;i<u.length;i++){var y=a.maxValue.toString().length-i;var b=u.length-(i+1);var v=u[b]-d;$column=e(e($box).children()[y]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))>v){e($column).animate({top:-(g-p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c);e($column).attr("value",v)}var y=a.maxValue.toString().length;var b=u.length-1;var v=u[b]-d;$column=e(e($box).children()[y]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))>v){e($column).animate({top:-(g-p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c,function(e){if(o!=null){if(f<a.maxValue){o()}else if(f==a.maxValue){if(h!=null){h()}if(a.repeat==true){o()}}}});e($column).attr("value",v)}};var y=function(t,n,r){var s=e(e(t).find("input")).val()-n;f=n;var o=r;if(!r){o=null}var u=new Array;var p=a.numberHeight/2;var d=a.numberStart;if(f<0){if(a.repeat==true){f=a.maxValue}else{f=0}}e(e(t).find("input")).val(f);if(f.toString().length>=1){u=f.toString().split("")}else{u=new Array(a.numberStart)}if(u.length<=a.maxValue.toString().length){$box=e(t).children()[1];for(i=1;i<=a.maxValue.toString().length-u.length;i++){var v=a.numberStart;$column=e(e($box).children()[i]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))<v){e($column).animate({top:-(g+p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c);e($column).attr("value",v)}for(i=1;i<u.length;i++){var y=a.maxValue.toString().length-i;var b=u.length-(i+1);var v=u[b]-d;$column=e(e($box).children()[y]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))<v){e($column).animate({top:-(g+p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c);e($column).attr("value",v)}var y=a.maxValue.toString().length;var b=u.length-1;var v=u[b]-d;$column=e(e($box).children()[y]).children()[0];var m=e(e($column).children()[0]).height();var g=v*p-p/2+m;if(parseInt(e($column).attr("value"))<v){e($column).animate({top:-(g+p*s)+"px"},0)}e($column).animate({top:-g+"px"},l,c,function(e){if(o!=null){if(f>0){o()}else if(f==0){if(h!=null){h()}if(a.repeat==true){o()}}}});e($column).attr("value",v)}};if(!f){f=0}if(!s){l=1e3}if(!o){c="linear"}if(!u){h=null}a=e.extend({numberStart:0,numberStop:9,maxValue:9,numberRoll:2,borderWidth:2,innerWidth:0,numberWidth:20,numberHeight:60,percentShadowRoll:50,xShadowBox:"0px",yShadowBox:"0px",blurShadowBox:"5px",spreadShadowBox:"0px",shadowBox:true,colorFrom:"rgba(96,96,96,1)",colorTo:"rgba(248,248,248,1)",colorRoll:"rgba(255,0,255,1)",colorShadowRollFrom:"rgba(0,0,0,0.8)",colorShadowRollTo:"rgba(255,255,255,0)",colorShadowBox:"rgba(0,0,0,0.8)",colorText:"rgba(0,0,0,1)",background:"rgba(255,255,255,1)",repeat:true},t);if(f>a.maxValue){f=a.maxValue}d=document.createElement("input");e(d).attr("type","hidden");e(d).val(f);e(this).append(d);b(this);w(p);E(this);S(this);e.fn.extend({setValue:function(t){v(e(this),t)},setValueMax:function(t){m(e(this),t)},setOptions:function(e){if(e.numberStart){a.numberStart=e.numberStart}if(e.numberStop){a.numberStop=e.numberStop}if(e.maxValue){a.maxValue=e.maxValue}if(e.numberRoll){a.numberRoll=e.numberRoll}if(e.borderWidth){a.borderWidth=e.borderWidth}if(e.innerWidth){a.innerWidth=e.innerWidth}if(e.numberWidth){a.numberWidth=e.numberWidth}if(e.numberHeight){a.numberHeight=e.numberHeight}if(e.percentShadowRoll){a.percentShadowRoll=e.percentShadowRoll}if(e.xShadowBox){a.xShadowBox=e.xShadowBox}if(e.yShadowBox){a.yShadowBox=e.yShadowBox}if(e.blurShadowBox){a.blurShadowBox=e.blurShadowBox}if(e.spreadShadowBox){a.spreadShadowBox=e.spreadShadowBox}if(e.shadowBox){a.shadowBox=e.shadowBox}if(e.colorFrom){a.colorFrom=e.colorFrom}if(e.colorTo){a.colorTo=e.colorTo}if(e.colorRoll){a.colorRoll=e.colorRoll}if(e.colorShadowRollFrom){a.colorShadowRollFrom=e.colorShadowRollFrom}if(e.colorShadowRollTo){a.colorShadowRollTo=e.colorShadowRollTo}if(e.colorShadowBox){a.colorShadowBox=e.colorShadowBox}if(e.colorText){a.colorText=e.colorText}if(e.background){a.background=e.background}if(e.repeat){a.repeat=e.repeat}},getValue:function(){return e(e(this).find("input")).val()},getValueMax:function(){return a.maxValue},getOptions:function(){return a},gotoValue:function(t,n){g(e(this),t,n)},addTick:function(t,n){g(e(this),parseInt(e(e(this).find("input")).val())+t,n)},removeTick:function(t,n){y(e(this),parseInt(e(e(this).find("input")).val())-t,n)},getId:function(){return e(this).attr("id")}});return this}})})(jQuery);
